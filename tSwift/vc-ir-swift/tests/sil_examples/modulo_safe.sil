sil_stage canonical

import Builtin
import Swift
import SwiftShims

// Modulo with non-zero precondition: auto-VC should PASS
// The @_requires("b != 0") ensures divisor is never zero.

@_requires("b != 0")
func safeMod(_ a: Int, _ b: Int) -> Int

sil hidden @safeMod : $@convention(thin) (Int, Int) -> Int {
bb0(%0 : $Int, %1 : $Int):
  debug_value %0, let, name "a", argno 1, loc "math.swift":3:15, scope 1
  debug_value %1, let, name "b", argno 2, loc "math.swift":3:25, scope 1
  %2 = struct_extract %0, #Int._value, loc "math.swift":3:45, scope 1
  %3 = struct_extract %1, #Int._value, loc "math.swift":3:49, scope 1
  %4 = builtin "srem_Int64"(%2, %3) : $Builtin.Int64, loc "math.swift":3:45, scope 1
  %5 = struct $Int (%4), loc "math.swift":3:45, scope 1
  return %5, loc "math.swift":3:37, scope 1
}
